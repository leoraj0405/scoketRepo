<!DOCTYPE html>
<html>

<head>
  <title>Socket.IO Demo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <style>
    /* Apply to any scrollable container */
    /* Target scroll container */
    .chat {
      max-height: 300px;
      overflow-y: auto;
      margin-right: 10px !important;

      /* Firefox */
      scrollbar-width: thin;
      scrollbar-color: #007bff #f1f1f1;
    }

    /* Chrome, Edge, Safari */
    .chat::-webkit-scrollbar {
      width: 12px;
    }

    .chat::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .chat::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #007bff, #007bff, #007bff);
      /* pink to blue gradient */
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: content-box;
    }

    .chat {
      overflow-x: hidden;
    }

    .chat p {
      word-break: break-word;
      overflow-wrap: break-word;
      white-space: normal;
    }
  </style>

  </style>
</head>

<body>

  <main>
    <div class="d-flex flex-column align-items-center">
      <h1 class="text-primary">Leo's Chat App</h1>
      <div class="w-75 d-flex align-items-center flex-column p-4">
        <div class="w-50 border border-primary rounded">
          <h2 class="text-center mb-4 text-secondary ">Start conversation !</h2>
          <div class="chat p-4" id="messages">
          </div>
        </div>
        <div class="input w-50 mt-4">
          <div class="d-flex">
            <input type="text" id="msgInput" class="form-control" placeholder="Type your message here">
            <button onclick="sendMsg()" class="btn btn-success ml-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send"
                viewBox="0 0 16 16">
                <path
                  d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    <footer class="mt-5">
      <p class="text-secondary text-center">Designed by leo</p>
    </footer>
  </main>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    function sendMsg() {
      const input = document.getElementById('msgInput');
      const message = input.value.trim();
      if (message) {
        socket.emit('message', message);
        input.value = '';
      }
    }

    // Server response (to sender)
    socket.on('serverResponse', (response) => {
      const data = `<div class="d-flex justify-content-end">
              <p class="border w-50 rounder p-2 border-success me-5 rounded">${response}</p>
            </div>`
      document.getElementById('messages').innerHTML += data
    });

    // Message from others
    socket.on('message', (msg) => {
      const data = `<div class="d-flex justify-content-start">
              <p class="border w-50 rounder p-2 border-warning rounded">${msg}</p>
            </div>`
      document.getElementById('messages').innerHTML += data
    });
  </script>

</body>

</html>